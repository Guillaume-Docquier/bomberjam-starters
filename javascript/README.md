# Bomberjam Javascript Starter  
Welcome to the Bomberjam Javascript Starter! In here you will find useful information about how to get started with training your bot, debugging its performance and seeing it play!  

## Requirements
You need Node.js and npm, nothing else!  
If you hace chocolatey, run ``choco install nodejs.install`` or you can [install it yourself](https://nodejs.org/en/download/).  
npm is always bundled with Node.js.  

## Before You Start
Before you start, download the dataset we will provide you and extract it in ``data/``. It might take some time.  
Also, run ``npm install`` and then ``npm run check-install``

## Project Structure  
At the root level, you will find the following files and folders:  
- ``bots/``: In there, you will find an example of bot configuration that you need to improve.  
- ``data/``: Contains the training dataset.
- ``src/``: Starter code used by other files. You do not need to edit this to succeed, but if you want to, you can do it.  
- ``saved-models/``: Contains the save files for your neural networks after training.  
- ``gamelogs/``: Contains the games replay files.
- ``play.js``: Use this when you want to play live.  
- ``simulate.js``: Use this when you want to play multiple games quickly. You will see some useful stats about the games.  
- ``test.js``: Use this to debug your neural network. It will output information about the behaviour of your bot.  
- ``train.js``: Use this to train your bot.  

I suggest you try the script before starting, so you can see what each can offer you and how they work.  
Example: ``node simulate.js``  

Some scripts support arguments if you want to modify their behaviours:  
``node simulate.js NUMBER_OF_GAMES_TO_SIMULATE`` (defaults to 10)  
``node test.js NUMBER_OF_GAMES_TO_TEST_AGAINST`` (defaults to 25)  
``node train.js NUMBER_OF_GAMES_TO_LOAD_IN_MEMORY_AT_THE_SAME_TIME`` (defaults to 50, increase with caution)  

## The Bots Folder 
All the utility scripts provided revolve around the export in ``bots/index.js``.  
It exports the bot you want to use, which consists of 4 properties:  
- ``newBot``: Function that creates a new instance of your bot class when playing / simulating.  
- ``modelName``: String used when saving / loading your model.  
- ``buildModel``: Function that creates your Tensorflow neural network when training / testing.  
- ``gameStateToModelInputConverter``: Function that takes a game state and a player id and returns the data to be fed into you neural network.  

If you want to try multiple models but keep the old ones, you can either branch out or create multiple folders inside ``bots/`` with your bot definitions. Then, in ``bots/index.js``, simply export the bot you want to use.  

In a bot folder, you should find 4 files:  
- ``index.js``: In here, you export the properties stated above from your other files.  
- ``bot.js``: You won't need to edit this file unless you do some real fancy stuff. It exports ``newBot``. The bot class itself requires 2 functions: ``init`` and ``getAction``.  
- ``data.js``: In here, you export ``gameStateToModelInputConverter`` and a ``DATA_SHAPE`` that you will need in ``model.js``.  
- ``model.js``: In here, you export ``buildModel`` and a ``modelName``. It will contain the definition of your neural network.  

Note that you can organize the code how you want it. The only important part are the expected exports stated earlier.  

## The Data And The Training Loop
The provided data consists of 6 thousand games generated by a very good bot.  
Each file contains an ordered list of game states and actions taken by each bot at that state.  
You will use the game state as your input, and the actions as your label.   

Because each game contains 4 players, each game tick is in fact 4 sets of inputs and labels.  
You do not need to format the labels, but as you've read above, you will need to convert a game state into a neural network input. 

The ``train.js`` script will run through all the files by batches. It will fit your model on each batch, save your model, and fit on the next batch.  
It is VERY long to train through all the files. You do not need to train through all the files and that is why the model is saved after each batch.  

Note that depending on your models and the specified batch size, training might take a lot of RAM. Node has a low memory limit, but you can increase it like so:  
``node --max-old-space-size=4096 train.js``  